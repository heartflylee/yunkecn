<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>团队首页</title>

    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <link type="image/x-icon" href="../images/favicon.ico" rel="icon">
    <link href="../css/reset.css" rel="stylesheet" type="text/css"/>

    <link href="../css/main.css" rel="stylesheet" type="text/css"/>
    <!--<link href="../css/main.css" rel="stylesheet" type="text/css" />-->
    <link rel="stylesheet" href="../css/head.css"/>
    <link rel="stylesheet" href="../css/cropbox.css"/>
    <script type="text/javascript" src="../js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="../js/main.js"></script>
    <script type="text/javascript" src="../js/audio.js"></script>
    <!--<script type="text/javascript" src="../js/highcharts.js"></script>-->

    <link href="../css/hDate.css" rel="stylesheet"/>
    <script type="text/javascript" src="../js/hDate.js"></script>
    <script type="text/javascript" src="../js/cropbox.js"></script>
    <script type="text/javascript" src="../js/index.js"></script>
    <script type="text/javascript" src="../js/layer/layer.js"></script>

    <!--<script src="../js/echarts.min.js"></script>-->
    <script type="text/javascript" src="../js/echarts1.js"></script>
    <!--<script type="text/javascript" src="../js/macarons.js"></script>-->


    <link rel="stylesheet" href="../css/zTreeStyle.css">
    <script src="../js/jquery.ztree.core.js"></script>
    <!--<script src="../js/jquery.ztree.excheck.js"></script>-->
    <script src="../js/jquery.ztree.exedit.js"></script>

    <!--[if lt IE 10]>
    <script src="../js/placeholder.js"></script>
    <![endif]-->
</head>

<body>
<!-- 页面遮罩层 layer -->
<div class="layer"></div>
<!-- 页面头部 header -->
<div class="header">
    <h1 class="logo fl"></h1>
    <span class="mar fl">|</span>
    <span class="fl"><em>团队版</em>[<a href="">点击切换</a>]</span>
    <ul class="nav">
        <li>
            <a href="indexnew2.html" class="current">首页</a>
        </li>
        <!--<li>-->
        <!--<a href="">行动</a>-->
        <!--</li>-->
        <li>
            <a href="customer1.html" >客户</a>
        </li>
        <li>
            <a href="download.html">线索</a>
        </li>
        <li>
            <a href="task.html" >任务</a>
        </li>
        <li>
            <a href="settings.html" id="top-setting">设置</a>
        </li>
    </ul>
    <ul class="header-right fr">
        <li>
            <a target="_blank" href="http://wpa.qq.com/msgrd?v=3&uin=2656862203&site=qq&menu=yes"><i class="qq"></i>
                <div class="service">在线客服</div>
            </a>
        </li>
        <li>
            <a href="javascript:;"><i class="add"></i></a>
        </li>
        <li>
            <a href="javascript:;"><i class="update"></i></a>
        </li>
        <li>
            <a href="javascript:;"><i class="message"></i></a>
        </li>
        <li>
            <a href="javascript:;" class="user"><img src="../images/a-1.png"/></a>
            <div class="quit_down">
                <div class="code">
                    <img src="../images/download.png"/>
                    <span>扫一扫下载云客APP</span>
                </div>
                <div class="quit_li">
                    <a>下载软电话</a>
                </div>
                <div class="quit_li">
                    <a>退出登录</a>
                </div>
            </div>
        </li>
    </ul>
</div>
<!-- 汇总提示 tipArea -->
<div class="tipArea">
    <div class="wrap">
        <div class="count_f">
            <span class="span-1 current" id=" ">数据统计</span>
            <span class="span-1">手机统计</span>
            <span class="span-1" id="  ">签到统计</span>
        </div>
    </div>
</div>
<!-- 内容部分 contents -->
<div class="contents">
    <!-- 左侧 -->
    <div class="leftPage fl">
        <a href="javascript:;" id="edit-com" class="edit-com"></a>
        <dl class="left-user">
            <dt><img src="../images/left-photo.png"></dt>
            <dd>
                <p>北京联云天下科技有限公司</p>
                <span>赵科虎，夏云柯</span>
            </dd>
        </dl>
        <div class="leftContentBox">
            <div class="tlt"><b>选择部门</b></div>
            <div class="indexTree">
                <ul id="tree" class="ztree department-tree"></ul>
            </div>
        </div>
        <div class="leftContentBox">
            <div class="tlt"><b id="choose-1">月榜</b>
                <span>销售之星</span>
                <a href="javascript:;" class="more" id="a-more"></a>
            </div>
            <!-- 筛选条件 -->
            <div class="choose-term" id="choose-term">
                <dl id="dl1">
                    <dt>项目</dt>
                    <dd>
                        <a href="javascript:;" class="current">有意向客户<i class="right-icon"></i></a>
                    </dd>
                    <dd>
                        <a href="javascript:;">电话量<i class="right-icon"></i></a>
                    </dd>
                    <dd>
                        <a href="javascript:;">成单量<i class="right-icon"></i></a>
                    </dd>
                </dl>

            </div>
            <ul class="sellers" id="sellers">
                <li class="cur"><span class="num">1</span>艾云鹤<i class="reward"></i><span class="orderForm">成单<em>14</em></span>
                </li>
                <li class="cur"><span class="num">2</span>艾云鹤<i class="reward"></i><span class="orderForm">成单<em>14</em></span>
                </li>
                <li class="cur"><span class="num">3</span>艾云鹤<i class="reward"></i><span class="orderForm">成单<em>14</em></span>
                </li>
                <li><span class="num">4</span>艾云鹤<span class="orderForm">成单<em>14</em></span></li>
                <li><span class="num">5</span>艾云鹤<span class="orderForm">成单<em>14</em></span></li>
                <li><span class="num">6</span>艾云鹤<span class="orderForm">成单<em>14</em></span></li>
                <li><span class="num">7</span>艾云鹤<span class="orderForm">成单<em>14</em></span></li>
            </ul>
        </div>
    </div>
    <!-- 右侧 -->
    <div class="rightPage">
        <div class="tabBox">
            <ul id="tabBox">
                <li>
                    <a href="index.html" class="current">本周</a>
                </li>
                <li>
                    <a href="index-1.html">上周</a>
                </li>
                <li>
                    <a href="index-2.html">近两月</a>
                </li>
                <li>
                    <a href="index-3.html">本月</a>
                </li>
                <li>
                    <a href="index-4.html">上月</a>
                </li>
            </ul>
            <div class="qujian">
                <label>筛选区间：</label>
                <span class="time"><input type="text" id="timetext"/></span>
                <label>至</label>
                <span class="time"><input type="text" id="timetext-1"/></span>
                <script type="text/javascript">
                    var minday;
                    var maxday;
                    $("#timetext").click(function (e) {
                        maxday = $("#timetext-1").val();
                        if (maxday == "") {
                            maxday = (new Date()).toString("yyyy-MM-dd");
                        }
                        var ths = this;
                        calendar.show({
                            id: this,
                            maxDay: maxday.toString("yyyy-MM-dd")
                        });
                    });
                    $("#timetext-1").click(function (e) {
                        minday = $("#timetext").val();
                        var ths = this;
                        calendar.show({
                            id: this,
                            maxDay: (new Date()).toString("yyyy-MM-dd"),
                            minDay: minday
                        });
                    });
                </script>
            </div>
            <a href="" class="ta fr week">周报</a>
        </div>
        <!-- 本周 -->
        <div class="contentsbox" style="display:block">
            <!--  -->
            <div class="totalbox">
                <div class="item-title-box">
                    <div class="item-title active">
                        客户增长量
                        <div class="item-num item1">
                            108<label>+15</label>
                        </div>
                    </div>
                    <div class="item-title">
                        任务增长量
                        <div class="item-num item2">
                            108<label>+15</label>
                        </div>
                    </div>
                    <div class="item-title">
                        任务完成增长量
                        <div class="item-num item3">
                            108<label>+15</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="tlt"><i></i><label id="charts-title">客户增长量</label></div>
            <div class="custmer-chart-box">
                <div id="cur-chartsbox" class="chartsbox cur-chartsbox">
                    <script type="text/javascript">
                        var dataLine = [{
                            name: "客户增长量",
                            data: [{
                                name: "2016-12-16",
                                value: 47,
                                url: 'http://www.yunkecn.com'
                            },
                                {
                                    name: "2016-12-17",
                                    value: 28, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-18",
                                    value: 40, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-19",
                                    value: 15, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-20",
                                    value: 32, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-21",
                                    value: 28, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-22",
                                    value: 40, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-23",
                                    value: 15, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-24",
                                    value: 32, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-16",
                                    value: 47,
                                    url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-17",
                                    value: 28, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-18",
                                    value: 40, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-19",
                                    value: 15, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-20",
                                    value: 32, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-21",
                                    value: 28, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-22",
                                    value: 40, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-23",
                                    value: 15, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-24",
                                    value: 32, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-16",
                                    value: 47,
                                    url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-17",
                                    value: 28, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-18",
                                    value: 40, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-19",
                                    value: 15, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-20",
                                    value: 32, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-21",
                                    value: 28, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-22",
                                    value: 40, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-23",
                                    value: 15, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-24",
                                    value: 32, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-19",
                                    value: 15, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-20",
                                    value: 32, url: 'http://www.yunkecn.com'
                                },
                                {
                                    name: "2016-12-20",
                                    value: 32, url: 'http://www.yunkecn.com'
                                }
                            ]
                        },
                            {
                                name: "任务增长量",
                                data: [{
                                    name: "2016-12-16",
                                    value: 47,
                                    url: 'http://www.yunkecn.com'
                                },
                                    {
                                        name: "2016-12-17",
                                        value: 100, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-18",
                                        value: 120, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-19",
                                        value: 82, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-20",
                                        value: 71, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-21",
                                        value: 80, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-22",
                                        value: 20, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-23",
                                        value: 70, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-24",
                                        value: 32, url: 'http://www.yunkecn.com'
                                    }
                                ]
                            },
                            {
                                name: "任务完成增长量",
                                data: [{
                                    name: "2016-12-16",
                                    value: 47,
                                    url: 'http://www.yunkecn.com'
                                },
                                    {
                                        name: "2016-12-17",
                                        value: 60, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-18",
                                        value: 70, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-19",
                                        value: 132, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-20",
                                        value: 81, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-21",
                                        value: 50, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-22",
                                        value: 20, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-23",
                                        value: 80, url: 'http://www.yunkecn.com'
                                    },
                                    {
                                        name: "2016-12-24",
                                        value: 32, url: 'http://www.yunkecn.com'
                                    }
                                ]
                            }
                        ];
                        var dataLineX = ['2016-12-16', '2016-12-18', '', '2016-12-20', '', '2015-12-22','2016-12-16', '', '2016-12-18', '', '2016-12-20', '', '2015-12-22','2016-12-16', '', '2016-12-18', '', '2016-12-20', '', '2015-12-22','2016-12-16', '', '2016-12-18', '', '2016-12-20','2016-12-16', '', '2016-12-18', '', '2016-12-20'];
                        var optionLine;
                        var chartsLine;
                        var lineColor = ["#50d2c2", "#ffb358", "#dd4444"];
                        $(function () {
                            optionLine = {
                                tooltip: {
                                    trigger: "axis",
                                    formatter: "{b} <br/>{a} : {c}"
                                },
                                xAxis: [{
                                    type: "category",
                                    boundaryGap: false,
                                    splitLine: {
                                        show: true
                                    },
                                    data: []
                                }],
                                yAxis: {},
                                series: [{
                                    name: "",
                                    type: "line",
                                    data: []
                                }]
                            };
                            chartsLine = echarts.init(document.getElementById("cur-chartsbox"));
//									chartsLine.setTheme(theme);
                            optionLine.color = [lineColor[0]];
                            optionLine.xAxis[0].data = dataLineX;
                            optionLine.series[0].name = dataLine[0].name;
                            optionLine.series[0].data = dataLine[0].data;
                            chartsLine.setOption(optionLine);
                            console.log(optionLine);
                        });

                        $(function () {
                            chartsLine.on('click', function (params) {
                                window.location.href = params.data.url;
                            });

                            var chartTitle = ["客户增长量", "任务增长量", "任务完成增长量"];
                            $(".item-title").click(function () {
                                if ($(this).hasClass("active")) {
                                    return false;
                                }
                                $(".item-title").removeClass("active");
                                $(this).addClass("active");
                                var index = $(this).index(".item-title");
                                $("#charts-title").text(chartTitle[index]);
//										optionLine.color = [theme.color[index]];
                                optionLine.color = [lineColor[index]];
                                optionLine.xAxis[0].data = dataLineX;
                                optionLine.series[0].name = dataLine[index].name;
                                optionLine.series[0].data = dataLine[index].data;
                                console.log(optionLine);
                                chartsLine.clear();
                                chartsLine.setOption(optionLine);
                            });
                        })
                        $(function () {
                            window.onresize = function () {
                                chartsLine.resize();
                            }
                        });
                    </script>
                </div>
            </div>
            <!--  -->
            <div class="tlt"><i></i>组员电话统计
                <div class="tit-nav">
                    <div class="tit-nav-li active">电话量</div>
                    <div class="tit-nav-li">联系人数</div>
                    <div class="tit-nav-li">通话时长</div>
                </div>
            </div>
            <div class="custmer-chart-box">
                <div class="customer-chart-t" id="customer-num">总电话量：100</div>
                <div class="chart-li">
                    <div class="pie-box" id="cur-chart1"></div>
                    <div class="pie-t" id="pie-t1"></div>
                </div>
                <div class="chart-li">
                    <div class="pie-box" id="cur-chart2"></div>
                    <div class="pie-t" id="pie-t2"></div>
                </div>
                <div class="chart-li">
                    <div class="pie-box" id="cur-chart3"></div>
                    <div class="pie-t" id="pie-t3"></div>
                </div>
                <div class="chart-li chart-row">
                    <div class="bar-box" id="cur-chart4"></div>
                </div>
                <script>
                    var countNum = [
                        {
                            name: "总电话量",
                            count: 100
                        }, {}
                        , {
                            name: "总通话时长",
                            count: "11\' 22\""
                        }
                    ];
                    var curData =
                        [
                            {
                                curchart: [
                                    {
                                        name: "接通状态",
                                        data: [
                                            {
                                            value: 50,
                                            name: '已接通',
                                            url: ''
                                        }, {
                                            value: 100,
                                            name: '未接通',
                                            url: ''
                                        }
                                        ]
                                    },
                                    {
                                        name: "所用设备",
                                        data: [{
                                            value: 10,
                                            name: 'PC端呼出',
                                            url: ''
                                        }, {
                                            value: 20,
                                            name: '手机端呼出',
                                            url: ''
                                        }, {
                                            value: 50,
                                            name: '手机端呼入',
                                            url: ''
                                        }, {
                                            value: 50,
                                            name: '电话盒子呼出',
                                            url: ''
                                        }
                                        ]
                                    },
                                    {
                                        name: "联系人种类",
                                        data: [{
                                            value: 10,
                                            name: '联系新客户电话量',
                                            url: ''
                                        }, {
                                            value: 10,
                                            name: '联系老客户电话量',
                                            url: ''
                                        }, {
                                            value: 20,
                                            name: '联系他人客户电话量',
                                            url: ''
                                        }, {
                                            value: 50,
                                            name: '联系公海客户电话量',
                                            url: ''
                                        }, {
                                            value: 50,
                                            name: '联系陌生号码电话量',
                                            url: ''
                                        }
                                        ]
                                    }
                                ]
                            }, {
                            curchart: [
//                                {
//                                    name:"联系人种类",
//                                    data:
//                                        [{
//                                            value: 10,
//                                            name: '联系新客户数量',
//                                            url: ''
//                                        }, {
//                                            value: 10,
//                                            name: '联系老客户数量',
//                                            url: ''
//                                        }, {
//                                            value: 20,
//                                            name: '联系他人客户数量',
//                                            url: ''
//                                        }, {
//                                            value: 50,
//                                            name: '联系公海客户数量',
//                                            url: ''
//                                        }, {
//                                            value: 50,
//                                            name: '联系陌生号码数量',
//                                            url: ''
//                                        }
//                                        ]
//                                }
                                {
                                    name: "bar",
                                    data: [
                                        {
                                            name: '总联系人数',
                                            type: 'bar',
                                            barMaxWidth: 45,
                                            barGap:'5%',
                                            data: [26, 18, 28, 25, 22, 10]
                                        },
                                        {
                                            name: '新客户',
                                            type: 'bar',
                                            barMaxWidth: 15,
                                            barGap:'5%',
                                            stack: '客户',
                                            data: [6, 4, 8, 7, 5, 2]
                                        },
                                        {
                                            name: '老客户',
                                            type: 'bar',
                                            barMaxWidth: 15,
                                            barGap:'5%',
                                            stack: '客户',
                                            data: [5, 3, 7, 4, 3, 2]
                                        },
                                        {
                                            name: '他人客户',
                                            type: 'bar',
                                            barMaxWidth: 15,
                                            barGap:'5%',
                                            stack: '客户',
                                            data: [3, 2, 3, 3, 2, 2]
                                        },
                                        {
                                            name: '公海客户',
                                            type: 'bar',
                                            barMaxWidth: 15,
                                            barGap:'5%',
                                            stack: '客户',
                                            data: [8, 6, 7, 7, 6, 2]
                                        },
                                        {
                                            name: '无关电话',
                                            type: 'bar',
                                            barMaxWidth: 15,
                                            barGap:'5%',
                                            stack: '客户',
                                            data: [4, 3, 3, 3, 6, 2]
                                        },
                                    ]
                                }
                            ]
                        }, {
                            curchart: [
                                {
                                    name: "所用设备",
                                    data: [{
                                        value: 80,
                                        name: 'PC端呼出',
                                        url: ''
                                    }, {
                                        value: 130,
                                        name: '手机端呼出',
                                        url: ''
                                    }, {
                                        value: 20,
                                        name: '手机端呼入',
                                        url: ''
                                    }, {
                                        value: 50,
                                        name: '电话盒子呼出',
                                        url: ''
                                    }
                                    ]
                                },
                                {
                                    name: "联系人种类",
                                    data: [{
                                        value: 10,
                                        name: '联系新客户',
                                        url: ''
                                    }, {
                                        value: 10,
                                        name: '联系老客户',
                                        url: ''
                                    }, {
                                        value: 20,
                                        name: '联系他人客户',
                                        url: ''
                                    }, {
                                        value: 50,
                                        name: '联系陌生号码',
                                        url: ''
                                    }
                                    ]
                                }
                            ]
                        }
                        ];

                    var curoption = [];
                    var options = {
                        tooltip: {
                            trigger: 'item',
                            formatter: "{a} <br/>{b} : {c} ({d}%)",
                            position: function (pt) {
                                return [pt[0], '10%'];
                            }
                        },
                        color: ['#50d2c2', '#ffb358', '#fd9c35', '#dd4444', '#bd3b47', '#dd4d79', '#5793f3', '#5578c2'],

                        series: [{
                            type: 'pie',
                            radius: '55%',
                            center: ['50%', '60%'],
                            label: {
                                normal: {
                                    formatter: "{b} ({d}%)",
                                    textStyle: {
                                        color: '#000'
                                    }
                                }
                            }
                        }]
                    };

                    var baroption = {
                        tooltip: {
                            trigger: 'axis',
                            axisPointer: {            // 坐标轴指示器，坐标轴触发有效
                                type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
                            }
                        },
                        legend: {
                            data: ['总联系人数', '新客户', '老客户', '他人客户', '公海客户', '无关电话']
                        },
                        xAxis: [
                            {
                                type: 'category',
                                data: []

                            }
                        ],
                        yAxis: [
                            {
                                type: 'value'
                            }
                        ],
                        color: ['#50d2c2', '#ffb358', '#fd9c35', '#dd4444', '#bd3b47', '#dd4d79', '#5793f3', '#5578c2'],

//								color:["#91c7af","#2e4454","#749f83","#cd8722","#bda39b","#6e7072"]
                    };
                    baroption.xAxis[0].data = dataLineX;
                    var barchart;

                    var curchart = [];
                    var pieT = [];
                    for (var i = 0; i < 3; i++) {
                        curchart[i] = echarts.init(document.getElementById('cur-chart' + (i + 1)));
//                                curchart[i].setTheme(theme);
                        pieT[i] = $("#pie-t" + (i + 1));
                        curoption.push(options);
                        curoption[i].series[0].name = curData[0].curchart[i].name;
//                        curoption[i].series[0].data = curData[0].curchart[i].data;
                        curoption[i].series[0].data = curData[0].curchart[i].data.length == 0?[{name:"暂无数据",value:0,url:"javascript:void(0)"}]:curData[0].curchart[i].data;
                        pieT[i].text(curData[0].curchart[i].name);
                        curchart[i].setOption(curoption[i]);
                        $("#customer-num").text(countNum[0].name + "：" + countNum[0].count);
                    }

                    $(".tit-nav-li").click(function () {
                        if ($(this).hasClass("active")) {
                            return false;
                        }
                        var index = $(this).index();
                        chartData = curData[index];
                        console.log(chartData);
                        if (chartData.curchart[0].name != "bar") {
                            $("#customer-num").text(countNum[index].name + "：" + countNum[index].count);
                        }
                        else {
                            $("#customer-num").text("");
                        }
                        if (chartData.curchart[0].name != "bar") {
                            $(".chart-li").show();
                            $(".chart-li.chart-row").hide();
                            var j;
                            for (j = 0; j < chartData.curchart.length; j++) {


                                if(index==2) {
                                    console.log(curoption[j].tooltip.formatter)
                                    curoption[j].tooltip.formatter = function (data) {
                                        console.log(data);
                                        var value = data.data.value;
                                        console.log(value)
                                        if (value % 60 == 0 && value > 0) {
                                            return data.seriesName + "<br/>" + data.data.name + " : " + parseInt(value / 60) + "m ("+data.percent+"%)";
                                        } else if (value > 60) {
                                            return data.seriesName + "<br/>" + data.data.name + " : " + parseInt(value / 60) + 'm ' + (value % 60) + 's ('+data.percent+'%)';
                                        } else {
                                            return data.seriesName + "<br/>" + data.data.name + " : " + value + 's ('+data.percent+'%)';
                                        }
                                    }
                                }else{
                                    curoption[j].tooltip.formatter = "{a} <br/>{b} : {c} ({d}%)";
                                }


                                curoption[j].series[0].name = chartData.curchart[j].name;
                                curoption[j].series[0].data = chartData.curchart[j].data.length == 0?[{name:"暂无数据",value:0,url:"javascript:void(0)"}]:chartData.curchart[j].data;
                                pieT[j].text(chartData.curchart[j].name);
                                curchart[j].clear();
                                curchart[j].setOption(curoption[j]);
                                $(".chart-li:eq(" + j + ")").show();
                            }
                            for (var i = j; i < 3; i++) {
                                curchart[i].clear();
                                pieT[i].text("");
                                $(".chart-li:eq(" + i + ")").hide();
                            }
                        }
                        else {
                            $(".chart-li").hide();
                            $(".chart-li.chart-row").show();
                            barChart = echarts.init(document.getElementById('cur-chart4'));
                            baroption.series = chartData.curchart[0].data;
                            pieT[0].text("");
                            barChart.clear();
                            barChart.setOption(baroption);
                        }

                        $(".tit-nav-li").removeClass("active");
                        $(this).addClass("active");
                    })
                    $(function () {
                        window.onresize = function () {
                            barChart.resize();
                        }
                    });
                </script>
            </div>
            <div class="tlt"><i></i>接通意向率 <div class="row_tip_f tip-index">
                <b class="row_tip"></b>
                <div class="row_tip_con">
                    此处只统计企业销售客户列表中呼叫的数据，任务中的数据不做统计
                </div>
            </div></div>
            <div id="chartsbox-1" class="chartsbox-1">
                <script type="text/javascript">
                    $(function () {
                        var myChart7 = echarts.init(document.getElementById('chartsbox-1'));
                        option7 = {
//                            tooltip: {
//                                trigger: 'axis',
//
//                            },
                            tooltip: {
                                trigger: 'item',
                                position: function (pt) {
                                    return [pt[0], '10%'];
                                },
                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                            },

                            color: ['#50d2c2', '#ffb358', '#fd9c35', '#dd4444', '#bd3b47', '#dd4d79', '#5793f3', '#5578c2'],
                            series: [{
                                name: '接通意向率',
                                type: 'pie',
                                radius: '55%',
                                center: ['50%', '60%'],
                                label: {
                                    normal: {
                                        formatter: "{b} ({d}%)",
                                        textStyle: {
                                            color: '#000'
                                        }
                                    }
                                },
                                data: [{
                                    value: 335,
                                    name: '有意向',
                                    url: 'http://www.yunkecn.com'
                                }, {
                                    value: 600,
                                    name: '无意向',
                                    url: 'http://www.yunkecn.com'
                                }],
                            }]
                        };
                        if(option7.series[0].data.length == 0){
                            option7.series[0].data = [{value:0,name:"暂无数据",url:"javascript:void(0)"}]
                        }
//								myChart7.setTheme(theme);
                        myChart7.setOption(option7);
                        myChart7.on('click', function (params) {
                            window.location.href = params.data.url;
                        });
                    });
                </script>
            </div>
            <!--  -->

            <div class="tlt"><i></i>电话沟通结果标签统计 <div class="row_tip_f tip-index">
                <b class="row_tip"></b>
                <div class="row_tip_con ">
                    此处只统计企业销售客户列表中呼叫的数据，任务中的数据不做统计
                </div>
            </div>
            </div>
            <div id="chartsbox-3" class="chartsbox-1">
                <script type="text/javascript">
                    $(function () {
                        var myChart9 = echarts.init(document.getElementById('chartsbox-3'));
//								option9 = {
//									tooltip: {
//										trigger: 'item',
//										formatter: "{a} <br/>{b}: {c} ({d}%)"
//									},
//
//									series: [{
//										name: '电话沟通结果标签统计',
//										type: 'pie',
//										selectedMode: 'single',
//										radius: [0, '45%'],
//
//										label: {
//											normal: {
//												position: 'inner'
//											}
//										},
//										labelLine: {
//											normal: {
//												show: false
//											}
//										},
//										data: [{
//											value: 300,
//											name: '有意向',
//											itemStyle: {
//												normal: {
//													//													color: 'rgb(80,210,194)'
//												}
//											}
//										}, {
//											value: 500,
//											name: '无意向',
//											itemStyle: {
//												normal: {
//													//													color: 'rgb(255,179,88)'
//												}
//											}
//										}, {
//											value: 400,
//											name: '二次外呼',
//											itemStyle: {
//												normal: {
//													//													color: '#61a0a8'
//												}
//											}
//										}, {
//											value: 450,
//											name: '资料错误',
//											itemStyle: {
//												normal: {
//													//													color: '#d48265'
//												}
//											}
//										}]
//									}, {
//										name: '电话沟通结果标签统计',
//										type: 'pie',
//										radius: ['55%', '70%'],
//
//										data: [{
//												value: 100,
//												name: '有意向1',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(80,210,194,1)'
//													}
//												}
//											}, {
//												value: 120,
//												name: '有意向2',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(80,210,194,0.9)'
//													}
//												}
//											}, {
//												value: 40,
//												name: '有意向3',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(80,210,194,0.8)'
//													}
//												}
//											}, {
//												value: 30,
//												name: '有意向4',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(80,210,194,0.7)'
//													}
//												}
//											}, {
//												value: 10,
//												name: '有意向5',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(80,210,194,0.6)'
//													}
//												}
//											}, {
//												value: 150,
//												name: '无意向1',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(255,179,88,1)'
//													}
//												}
//											}, {
//												value: 200,
//												name: '无意向2',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(255,179,88,0.9)'
//													}
//												}
//											}, {
//												value: 100,
//												name: '无意向3',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(255,179,88,0.8)'
//													}
//												}
//											}, {
//												value: 50,
//												name: '无意向4',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(255,179,88,0.7)'
//													}
//												}
//											}, {
//												value: 50,
//												name: '二次外呼1',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(97,160,168,1)'
//													}
//												}
//											}, {
//												value: 80,
//												name: '二次外呼2',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(97,160,168,0.9)'
//													}
//												}
//											}, {
//												value: 70,
//												name: '二次外呼3',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(97,160,168,0.8)'
//													}
//												}
//											}, {
//												value: 150,
//												name: '二次外呼4',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(97,160,168,0.7)'
//													}
//												}
//											}, {
//												value: 50,
//												name: '二次外呼5',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(97,160,168,0.6)'
//													}
//												}
//											}, {
//												value: 130,
//												name: '资料错误1',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(212,130,101,1)'
//													}
//												}
//											}, {
//												value: 180,
//												name: '资料错误2',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(212,130,101,0.9)'
//													}
//												}
//											}, {
//												value: 140,
//												name: '资料错误3',
//												itemStyle: {
//													normal: {
//														//														color: 'rgba(212,130,101,0.8)'
//													}
//												}
//											}
//
//										]
//									}]
//								};
                        option9 = {
//                            tooltip: {
//                                trigger: 'axis',
//                                position: function (pt) {
//                                    return [pt[0], '10%'];
//                                }
//                            },
                            tooltip: {
                                trigger: 'item',
                                position: function (pt) {
                                    return [pt[0], '10%'];
                                },
                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                            },
                            color: ['#50d2c2', '#ffb358', '#fd9c35', '#dd4444', '#bd3b47', '#dd4d79', '#5793f3', '#5578c2'],
                            series: [{
                                name: '电话沟通结果标签统计',
                                type: 'pie',
                                radius: '55%',
                                center: ['50%', '60%'],
                                label: {
                                    normal: {
                                        formatter: "{b} ({d}%)",
                                        textStyle: {
                                            color: '#000'
                                        }
                                    }
                                },
                                data: [{
                                    value: 335,
                                    name: '有意向'
                                }, {
                                    value: 200,
                                    name: '无意向'
                                }, {
                                    value: 180,
                                    name: '资料错误'
                                }, {
                                    value: 160,
                                    name: '二次外呼'
                                }],
                            }]
                        };
                        if(option9.series[0].data.length == 0){
                            option9.series[0].data = [{value:0,name:"暂无数据",url:"javascript:void(0)"}]
                        }
//								myChart9.setTheme(theme);
                        myChart9.setOption(option9);
                        myChart9.on('click', function (params) {
                            window.location.href = params.data.url;
                        });
                    });
                </script>
            </div>
            <div class="tlt"><i></i>销售状态标签统计</div>
            <div id="chartsbox-2" class="chartsbox-1">
                <script type="text/javascript">
                    $(function () {

                        var myChart8 = echarts.init(document.getElementById('chartsbox-2'));
                        option8 = {
                            tooltip: {
                                trigger: 'axis',
                                position: function (pt) {
                                    return [pt[0], '10%'];
                                }
                            },
                            tooltip: {
                                trigger: 'item',
                                formatter: "{a} <br/>{b} : {c} ({d}%)"
                            },
                            color: ['#50d2c2', '#ffb358', '#fd9c35', '#dd4444', '#bd3b47', '#dd4d79', '#5793f3', '#5578c2'],
                            series: [{
                                name: '销售状态标签统计',
                                type: 'pie',
                                radius: '55%',
                                center: ['50%', '60%'],
                                label: {
                                    normal: {
                                        formatter: "{b} ({d}%)",
                                        textStyle: {
                                            color: '#000'
                                        }
                                    }
                                },
                                data: [{
                                    value: 335,
                                    name: '未沟通',
                                    url: 'http://www.yunkecn.com'
                                }, {
                                    value: 200,
                                    name: '拟定合同',
                                    url: 'http://www.yunkecn.com'
                                }, {
                                    value: 180,
                                    name: '确认需求',
                                    url: 'http://www.yunkecn.com'
                                }, {
                                    value: 160,
                                    name: '确认报价',
                                    url: 'http://www.yunkecn.com'
                                }, {
                                    value: 150,
                                    name: '初步接洽',
                                    url: 'http://www.yunkecn.com'
                                }, {
                                    value: 100,
                                    name: '已成单',
                                    url: 'http://www.yunkecn.com'
                                }],
                            }]
                        };

                        if(option8.series[0].data.length == 0){
                            option8.series[0].data = [{value:0,name:"暂无数据",url:"javascript:void(0)"}]
                        }
//								myChart8.setTheme(theme);
                        myChart8.setOption(option8);
                        myChart8.on('click', function (params) {
                            window.location.href = params.data.url;
                        });
                    });
                </script>
            </div>
            <!--  -->
        </div>
        <!-- /本周 -->

    </div>
</div>
<!-- 页面弹层 -->
<!-- 编辑公司 -->
<div class="edit-company" id="edit-company">
    <a href="javascript:;" class="a-closed"></a>
    <div class="company-photo-box">
        <img src="../images/company-photo.png">
        <a href="javascript:;" class="a-edit-photo"></a>
    </div>
    <p class="p1">北京联云天下科技有限公司</p>
    <p class="p2">赵科虎，夏云柯</p>
    <form class="companyForm">
        <input type="text" class="text" name="" placeholder="请输入企业名称" id="submitcomname">
        <div class="company-list">
            <a href="javascript:void(0)" class="company-li">北京联云天下科技有限公司</a>
            <a href="javascript:void(0)" class="company-li">北京联云天下科技有限公司</a>
            <a href="javascript:void(0)" class="company-li">北京联云天下科技有限公司</a>
            <a href="javascript:void(0)" class="company-li">北京联云天下科技有限公司</a>
            <a href="javascript:void(0)" class="company-li">北京联云天下科技有限公司</a>
        </div>
        <input type="text" class="text" name="" placeholder="请输入企业地址">
        <input type="text" class="text" name="" placeholder="请输入企业简介">
        <input type="text" class="text" name="" id="asselect" placeholder="请选择所属行业">
        <i class="select-icon"></i>
        <div class="selectBox">
            <a href="javascript:;">行业1</a>
            <a href="javascript:;">行业2</a>
            <a href="javascript:;">行业4</a>
            <a href="javascript:;">行业1</a>
            <a href="javascript:;">行业1</a>
        </div>
        <input type="button" class="btn" value="保存" id="submitBtn">
    </form>
</div>
<div class="applyBox edit_photo">
    <div class="tlt"><i></i>编辑头像
        <a href="javascript:void(0)" class="a-closed"></a>
    </div>
    <div class="container">
        <div class="imageBox">
            <div class="thumbBox"></div>
            <div class="spinner" style="display: none">Loading...</div>
        </div>
        <div class="action">
            <div class="new-contentarea tc">
                <a href="javascript:void(0)" class="upload-img">
                    <label for="upload-file">上传图片</label>
                </a>
                <input type="file" class="" name="upload-file" id="upload-file"/>
            </div>
            <input type="button" id="btnCrop" class="Btnsty_peyton" value="裁切">
            <input type="button" id="btnZoomIn" class="Btnsty_peyton" value="+">
            <input type="button" id="btnZoomOut" class="Btnsty_peyton" value="-">
        </div>
        <div class="cropped">
            <div class="photo_top">
                图片预览
            </div>
            <div class="photo">
            </div>
        </div>
        <div class="clear"></div>
        <div class="photo_size">
            <p>最佳尺寸100×100，可以上传高质量图片进行裁剪</p>
            <div class="photo_btn">
                <input type="button" class="cancle" value="取消"/>
                <input type="button" value="保存"/>
            </div>
        </div>
    </div>

</div>

<script>
    var setting = {
        view: {
            addDiyDom: addDiyDom,
            selectedMulti: false,
            showIcon: false,
            fontCss: {'font-weight': 'bold'}
        },
        check: {
            enable: false
        },
        data: {
            simpleData: {
                enable: true
            }
        }
    }

    function addDiyDom(event,treeNode) {
        if(treeNode.phone != undefined&&treeNode.phone==1){
            var aObj = $("#" + treeNode.tId + "_a");
            var editStr = "<span class='phone-mark'></span>";
            aObj.append(editStr);
        }
    }

    //选择部门
    function onMouseDown(event, treeId, treeNode) {
        //选中部门
    }

    var zNodes = [{
        name: "全公司", open: true,
        children: [
            {
                name: "销售部",
                children: [
                    {name: "销售部1",phone:0},
                    {name: "销售部2",phone:1},
                    {name: "销售部3",phone:0},
                    {name: "销售部4",phone:0}
                ]
            },
            {
                name: "市场部",
                children: [
                    {name: "市场部1",phone:0},
                    {name: "市场部2",phone:1},
                    {name: "市场部3",phone:0},
                    {name: "市场部4市场部4市场部4市场部4市场部4",phone:1}
                ]
            }
        ]
    }];

    //默认设置树形结构
    $(document).ready(function () {
        $.fn.zTree.init($("#tree"), setting, zNodes);
    });

</script>


<script type="text/javascript">
    $(function () {
        //			$(".layer").show();
        //			$("#powers_over1").show();

        $("#powers_over1 .email_info a").click(function () {
            $("#contact").show();
        });
        $(".powers_over a.a-closed").click(function () {
            $(".powers_over").hide();
            $(".layer").hide();
        });
        $("#contact a.a-closed").click(function () {
            $(".powers_over").hide();
            $(".layer").hide();
            $("#contact").hide();
        });

        $("#setting-tip").show().addClass("animate");
        $("#setting-tip").css("left", $("#top-setting").offset().left);
        $("#setting-tip .btn").click(function () {
            $("#setting-tip").hide();
        });
        $("#setting-tip").click(function () {
            event.stopPropagation();
        });
        $(window).click(function () {
            $("#setting-tip").hide();
        });


        $("#submitcomname").bind("input propertychange",function(){
            $(".company-list").show();
        });
        $("body").on("click",".company-li",function(){
            $("#submitcomname").val($(this).text());
            $(".company-list").hide();
        });

    });
</script>

</body>

</html>