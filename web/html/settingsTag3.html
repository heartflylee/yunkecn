<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>设置</title>
    <link href="../css/reset.css" rel="stylesheet" type="text/css" />
    <link href="../css/main.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="../css/head.css" />
    <link rel="stylesheet" href="../css/select.css" />
    <script type="text/javascript" src="../js/jquery-1.8.0.min.js"></script>
    <script type="text/javascript" src="../js/main.js"></script>
    <script src="../js/audio.js"></script>

    <link rel="stylesheet" href="../css/zTreeStyle.css">

    <script src="../js/jquery.ztree.core.js"></script>
    <!--<script src="../js/jquery.ztree.excheck.js"></script>-->
    <script src="../js/jquery.ztree.exedit.js"></script>

    <script src="../js/vue.min.js"></script>
    <script src="../js/vue-resource@1.3.4.js"></script>
    <!-- <script src="../js/Sortable.min.js"></script> -->
    <script src="../js/sortable.js"></script>
    <script src="../js/vuedraggable.js"></script>
    <script src="../js/lodash.min.js"></script>
    <script src="../js/toastr.js"></script>
    <link rel="stylesheet" href="../css/toastr.css">
    <link rel="stylesheet" href="../css/tagKeywords.css">
</head>

<body>
    <!-- 页面遮罩层 layer -->
    <div class="layer"></div>
    <div class="layer-1"></div>
    <!-- 页面头部 header -->
    <div class="header">
        <h1 class="logo fl"></h1>
        <span class="mar fl">|</span>
        <span class="fl">
            <em>团队版</em>[
            <a href="">点击切换</a>]</span>
        <ul class="nav">
            <li>
                <a href="indexnew2.html">首页</a>
            </li>
            <!--<li>-->
            <!--<a href="">行动</a>-->
            <!--</li>-->
            <li>
                <a href="customer1.html">客户</a>
            </li>
            <li>
                <a href="download.html">线索</a>
            </li>
            <li>
                <a href="task.html">任务</a>
            </li>
            <li>
                <a href="settings.html" id="top-setting" class="current">设置</a>
            </li>
        </ul>
        <ul class="header-right fr">
            <li>
                <a href="javascript:;">
                    <i class="add"></i>
                </a>
            </li>
            <li>
                <a href="javascript:;">
                    <i class="update"></i>
                </a>
            </li>
            <li>
                <a href="javascript:;">
                    <i class="message"></i>
                </a>
            </li>
            <li>
                <a href="javascript:;" class="user">刘</a>
            </li>
        </ul>
    </div>
    <!-- 汇总提示 tipArea -->
    <div class="tipArea">
        <div class="wrap">
            <ul class="ul-2">
                <li>
                    <a href="settings.html">团队设置</a>
                </li>
                <li>
                    <a href="settings-1.html" class="current">标签设置</a>
                </li>

                <li>
                    <a href="settings-2.html">短信模板设置</a>
                </li>
                <li>
                    <a href="settings-email.html">邮件账户设置</a>
                </li>
                <li>
                    <a href="settings-email1.html">邮件模板设置</a>
                </li>
                <li>
                    <a href="settings-call.html">挂机时间设置</a>
                </li>
                <li>
                    <a href="settings-sea.html">企业公海设置</a>
                </li>
                <li>
                    <a href="settings-task.html">云电销设置</a>
                </li>

            </ul>
        </div>
    </div>
    <!-- 内容部分 contents -->
    <div class="contents content-fixed" id="main">
        <div class="leftPage fl">
            <div class="leftContentBox">
                <div class="tlt">选择组员</div>
                <div class="indexTree">
                    <ul id="tree" class="ztree department-tree"></ul>
                </div>
            </div>
        </div>
        <!-- 右侧 -->
        <div class="rightPage tagTop">
            <!-- 本周 -->
            <div class="contentsbox wechatWrap" style="display:block">
                <div class="tag-box">
                    <div class="tags-li ">
                        <a href="settingsTag1.html">自定义标签</a>
                    </div>
                    <div class="tags-li">
                        <a href="settingsTag2.html">销售进度标签</a>
                    </div>
                    <div class="tags-li active">
                        <a href="settingsTag3.html">连续外呼标签</a>
                    </div>
                </div>
                <div class="right-content">
                    <div class="tagBtnBox">
                        <input type="button" class="btn" value="保存标签组" @click="submit">
                        <select class="select-box Jselect" id="cover_options" v-model="coverDepartmentId">
                            <option value="default">默认标签组</option>
                            <option value="1">选择标签组</option>
                            <option value="2">标签组1</option>
                            <option value="3">标签组2</option>
                            <option value="4">标签组3</option>
                        </select>
                    </div>
                    <div class="tag-list tag-double">
                        <div class="tag-row tag-row-title">
                            <div class="tag-li">
                                标签内容
                            </div>
                            <div class="tag-li">
                                显示
                            </div>
                            <!-- <div class="tag-li">
                                操作
                            </div> -->
                        </div>
                        <div class="tag-type" v-for="type in callTipsType">
                            <div class="tag-row tag-row-boder">
                                <div class="tag-li">
                                    {{callTipsStr[type]}}
                                </div>
                                <div class="tag-li">

                                </div>
                                <!-- <div class="tag-li">
                                </div> -->
                            </div>
                            <ul class="tag-row-box" :id="type" ref="calltips">
                                <draggable v-model="callTips[type]" :options="{draggable:'.tag-row',group:'calltips'}" :list="callTips[type]" @end="end">
                                    <li class="tag-row" v-for="item,$index in callTips[type]" :key="item.id" :data-id="JSON.stringify(item)">
                                        <div class="tag-li">
                                            {{item.name}}
                                        </div>
                                        <div class="tag-li">
                                            <label class="checkbox-label">
                                                <input type="checkbox" v-model="item.show" value="true">
                                                <i></i>
                                            </label>
                                        </div>
                                        <!-- <div class="tag-li">
                                            <a href="javascript:;" class="href">转移</a>
                                        </div> -->
                                        <div class="tag-move"></div>
                                    </li>
                                </draggable>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>


    <!--覆盖标签组-->
    <div class="changer-box setManage" id="coverTag">
        <div class="tlt">
            <i></i>覆盖标签组
            <a href="javascript:layerClose('#coverTag');" class="a-closed"></a>
        </div>
        <div class="function-content">
            <div class="bolder">
                是否使用“
                <span id="cover_group_name">默认标签组</span>”覆盖当前部门标签组
            </div>
            <div class="manage-btn-wrap">
                <input type="button" class="manage-btn btn-cancel" onclick="layerClose('#coverTag')" value="取消" />
                <input type="button" class="manage-btn" onclick="coverTags()" value="确定" />
            </div>
        </div>
    </div>
    <!--覆盖标签组-->


    <script>
        var setting = {
            view: {
                selectedMulti: false,
                showIcon: false,
                fontCss: { 'font-weight': 'bold' }
            },
            check: {
                enable: false
            },
            data: {
                simpleData: {
                    enable: true
                }
            }
        }


        //选择部门
        function onMouseDown(event, treeId, treeNode) {
            //选中部门
        }

        var zNodes = [{
            name: "全公司", open: true,
            children: [
                {
                    name: "销售部",
                    children: [
                        { name: "销售部1", checked: "isChecked" },
                        { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" }, { name: "销售部2" },
                        { name: "销售部3" },
                        { name: "销售部4" }
                    ]
                },
                {
                    name: "市场部",
                    children: [
                        { name: "市场部1" },
                        { name: "市场部2" },
                        { name: "市场部3" },
                        { name: "市场部4市场部4市场部4市场部4市场部4" }
                    ]
                }
            ]
        }];

        //默认设置树形结构
        $(document).ready(function () {
            $("#tree").css({ "max-height": $(window).height() - $("#tree").offset().top - 32, "overflow": "auto" });

            var tree = $.fn.zTree.init($("#tree"), setting, zNodes);
            var t = tree.getNodeByParam('name', '市场部');
            tree.selectNode(t);
        });
        toastr.options = {
            "closeButton": true,
            "debug": true,
            "positionClass": "toast-top-center",
            "showDuration": "300",
            "hideDuration": "1000",
            "timeOut": "5000",
            "extendedTimeOut": "1000",
            "showEasing": "swing",
            "hideEasing": "linear",
            "showMethod": "fadeIn",
            "hideMethod": "fadeOut"
        }
        var vm = new Vue({
            el: "#main",
            data: {
                callTips: {
                    dataErrors: [],
                    noIntentions: [],
                    twiceCalls: []
                },
                coverDepartmentId: 'default',
                callTipsType: ['noIntentions', 'dataErrors', 'twiceCalls'],
                callTipsStr: { noIntentions: "无意向", dataErrors: "资料错误", twiceCalls: "二次外呼" }
            },
            mounted: function () {
                var _self = this;
                _self.$data.callTips.noIntentions = [
                    { id: 'noIntentions0', name: '用户拒接', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'noIntentions1', name: '未接听挂断', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'noIntentions2', name: '接听3秒内挂断', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                ];
                _self.$data.callTips.dataErrors = [
                    { id: 'dataErrors0', name: '号码错误', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'dataErrors1', name: '空号', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'dataErrors2', name: '停机', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'dataErrors3', name: '暂停服务', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                ];
                _self.$data.callTips.twiceCalls = [
                    { id: 'twiceCalls0', name: '关机', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls1', name: '呼叫转移失败', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls2', name: '呼入限制', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls3', name: '来电提醒', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls4', name: '号码欠费', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls5', name: '网络忙', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls6', name: '无法接通', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls7', name: '无人接听', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls8', name: '用户正忙', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                    { id: 'twiceCalls9', name: '正在通话中', show: parseInt(Math.random() * 10) % 2 == 0 ? true : false },
                ];
            },
            methods: {
                submit: function () {
                    console.log(this.$data.callTips);
                },
                end: function (evt) {
                    toastr.success('标签顺序调整成功');
                }
            },
            watch: {
                // 选择右上角 其他部门标签
                coverDepartmentId: function (val) {
                    $("#coverTag").show();
                    $(".layer").show();
                    $("#cover_group_name").text($("#cover_options option:selected").text());
                }
            },
        });

        //关闭弹框
        function layerClose(obj) {
            $(obj).hide();
            $(".layer").hide();
        }

        function coverTags() {
            var _self = vm;
            layerClose('#coverTag');
        }

    </script>

</body>

</html>